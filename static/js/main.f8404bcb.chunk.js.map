{"version":3,"sources":["Components/Modal/Modal.jsx","Components/Loans/Loans.jsx","App.jsx","index.jsx"],"names":["Modal","active","children","className","aria-hidden","onClick","e","stopPropagation","Loans","availableAmount","loansData","loans","map","loan","amount","replace","Number","reduce","prev","curr","toString","useState","money","setMoney","modalActive","setModalActive","chosenLoan","setChosenLoan","investment","setInvestment","invested","setInvested","activeLoan","find","id","includes","type","event","preventDefault","title","available","Math","floor","term_remaining","onSubmit","inv","decreasedAmount","toLocaleString","minimumFractionDigits","investMoney","av","changedAmount","changeAvailable","placeholder","value","onChange","target","required","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f8404bcb.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport './Modal.scss';\n\nexport const Modal = ({ active, children }) => (\n  <div\n    className={active ? 'Modal active' : 'Modal'}\n    aria-hidden=\"true\"\n  >\n    <div\n      className={active ? 'Modal__content active' : 'Modal__content'}\n      onClick={e => e.stopPropagation()}\n      aria-hidden=\"true\"\n    >\n      {children}\n    </div>\n  </div>\n);\n\nModal.propTypes = {\n  active: PropTypes.bool.isRequired,\n  children: PropTypes.element.isRequired,\n};\n","import React, { useState } from 'react';\nimport './Loans.scss';\n\nimport loansData from '../../api/current-loans.json';\nimport { Modal } from '../Modal/Modal';\n\nexport const Loans = () => {\n  const amountData = loansData.loans.map(loan => loan.amount);\n  const amountWithDot = amountData.map(e => e.replace(/,/g, '.'));\n  const amountAsNumber = amountWithDot.map(e => Number(e));\n  const amountSum = amountAsNumber.reduce((prev, curr) => prev + curr, 0);\n  const availableAmount = amountSum.toString().replace(/[.]/g, ',');\n\n  const [money, setMoney] = useState(availableAmount);\n  const [modalActive, setModalActive] = useState(false);\n  const [chosenLoan, setChosenLoan] = useState('');\n  const [investment, setInvestment] = useState('');\n  const [invested, setInvested] = useState([]);\n\n  const activeLoan = loansData.loans.find(loan => loan.id === chosenLoan);\n\n  const handleChange = (e) => {\n    const value = e.target.value.replace(/\\D/g, '');\n\n    setInvestment(Number(value).toLocaleString());\n  };\n\n  const investMoney = (inv) => {\n    const decreasedAmount = (\n      Number(money.replace(/[,]/g, '')) - Number(inv.replace(/[,]/g, ''))\n    );\n\n    setMoney(decreasedAmount.toLocaleString(\n      'en-US', { minimumFractionDigits: 0 },\n    ));\n  };\n\n  const showInvestedLoans = (id) => {\n    setInvested([...invested, id]);\n  };\n\n  const changeAvailable = (id, av, inv) => {\n    const changedAmount = (\n      Number(av.replace(/[,]/g, '')) - Number(inv.replace(/[,]/g, ''))\n    );\n\n    const loanToChange = loansData.loans.find(loan => loan.id === id);\n\n    loanToChange.available = changedAmount.toLocaleString(\n      'en-US', { minimumFractionDigits: 0 },\n    );\n  };\n\n  return (\n    <>\n      <div className=\"Loans\">\n        <div className=\"Loans__loans-wrapper\">\n          {loansData.loans.map(loan => (\n            <div className=\"Loans__loan-block\" key={loan.id}>\n              <div className=\"Loans__loan-title\">\n                <p className=\"Loans__loan-name\">Loan name 1</p>\n                <p className=\"Loans__loan-details\">Loan details and values</p>\n              </div>\n              <div className=\"Loans__loan-actions\">\n                <p className={invested.includes(loan.id)\n                  ? 'Loans__loan-invested active'\n                  : 'Loans__loan-invested'}\n                >\n                  Invested\n                </p>\n                <button\n                  type=\"button\"\n                  className=\"Loans__loan-button\"\n                  onClick={(event) => {\n                    event.preventDefault();\n                    setModalActive(true);\n                    setChosenLoan(loan.id);\n                  }}\n                >\n                  Invest\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n        <section className=\"Loans__amount-remain\">\n          <p>\n            Total amount available for investment:\n          </p>\n          <p>\n            {`$${money}`}\n          </p>\n        </section>\n        <Modal active={modalActive}>\n          {activeLoan && (\n            <div className=\"Loans__modal-container\">\n              <button\n                type=\"button\"\n                className=\"Loans__close-button\"\n                onClick={(event) => {\n                  event.preventDefault();\n                  setModalActive(false);\n                  setChosenLoan('');\n                }}\n              >\n                â•³\n              </button>\n              <p className=\"Loans__modal-slogan\">\n                Invest in Loan\n              </p>\n              <p className=\"Loans__modal-title\">\n                {activeLoan.title}\n              </p>\n              <div className=\"Loans__modal-details\">\n                <p className={Number(investment.replace(/[,]/g, ''))\n                  - Number(activeLoan.available.replace(/[,]/g, '')) > 0\n                  && 'Loans__loan-error'}\n                >\n                  {`Amount available: $${activeLoan.available}`}\n                </p>\n                <p>\n                  {`Loan ends in: ${Math.floor(\n                    activeLoan.term_remaining / 86400,\n                  )} days`}\n                </p>\n              </div>\n              <p className=\"Loans__modal-amount\">\n                Investment amount\n              </p>\n              <form\n                className=\"Loans__modal-form\"\n                onSubmit={(event) => {\n                  event.preventDefault();\n                  setModalActive(false);\n                  showInvestedLoans(activeLoan.id);\n                  investMoney(investment);\n                  changeAvailable(\n                    activeLoan.id,\n                    activeLoan.available,\n                    investment,\n                  );\n                  setInvestment('');\n                }}\n              >\n                <input\n                  type=\"text\"\n                  className=\"Loans__modal-input\"\n                  placeholder=\"1,000\"\n                  value={investment}\n                  onChange={handleChange}\n                  required\n                />\n                <button\n                  type=\"submit\"\n                  className={Number(investment.replace(/[,]/g, ''))\n                    - Number(activeLoan.available.replace(/[,]/g, '')) > 0\n                    ? 'Loans__loan-button disabled' : 'Loans__loan-button'}\n                >\n                  Invest\n                </button>\n              </form>\n            </div>\n          )}\n        </Modal>\n      </div>\n    </>\n  );\n};\n","import React from 'react';\nimport './App.scss';\n\nimport { Loans } from './Components/Loans/Loans';\n\nexport const App = () => (\n  <div className=\"App\">\n    <header className=\"App__header\">\n      Current Loans\n    </header>\n    <Loans />\n  </div>\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}